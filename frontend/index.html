<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIBO Lightning Director âš¡</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/three@0.163.0/build/three.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš¡ FIBO Lightning Director</h1>
            <p>Cinematic lighting control with AI precision</p>
        </header>

        <div class="main-content">
            <!-- Left Panel: Controls -->
            <div class="controls-panel">
                <div class="section">
                    <h2>ğŸ¬ Scene Description</h2>
                    <textarea id="prompt" rows="4" placeholder="Describe your scene...">
A detective in a noir office at night, rain on the window, moody atmosphere
                    </textarea>
                </div>

                <div class="section">
                    <h2>ğŸ’¡ Lighting Control</h2>
                    
                    <div class="light-control">
                        <label>Key Light Intensity</label>
                        <input type="range" id="key-intensity" min="0" max="200" value="100">
                        <span id="key-value">100%</span>
                    </div>

                    <div class="light-control">
                        <label>Color Temperature</label>
                        <input type="range" id="color-temp" min="2000" max="10000" value="3200">
                        <span id="temp-value">3200K (Tungsten)</span>
                    </div>

                    <div class="light-control">
                        <label>Light Direction</label>
                        <input type="range" id="light-angle" min="0" max="360" value="45">
                        <span id="angle-value">45Â°</span>
                    </div>

                    <div class="toggle">
                        <input type="checkbox" id="hdr-toggle" checked>
                        <label for="hdr-toggle">Enable HDR (16-bit)</label>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ¥ Camera</h2>
                    <select id="lens-select">
                        <option value="24mm">24mm (Wide)</option>
                        <option value="50mm" selected>50mm (Normal)</option>
                        <option value="85mm">85mm (Portrait)</option>
                        <option value="135mm">135mm (Telephoto)</option>
                    </select>

                    <div class="light-control">
                        <label>Aperture: f/</label>
                        <input type="range" id="aperture" min="1.4" max="16" step="0.1" value="2.8">
                        <span id="aperture-value">2.8</span>
                    </div>
                </div>

                <button id="generate-btn" class="generate-btn">âš¡ Generate Scene</button>
                <button id="storyboard-btn" class="secondary-btn">ğŸï¸ Create Storyboard</button>
            </div>

            <!-- Right Panel: Results -->
            <div class="results-panel">
                <div class="image-container">
                    <img id="result-image" src="" alt="Generated scene">
                    <div id="loading" class="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Generating with FIBO...</p>
                    </div>
                </div>

                <div class="json-viewer">
                    <h3>FIBO JSON Structure</h3>
                    <pre id="json-output">{"waiting_for_generation": true}</pre>
                </div>

                <div class="actions">
                    <button id="export-json" class="small-btn">ğŸ“‹ Copy JSON</button>
                    <button id="download-img" class="small-btn">ğŸ’¾ Save Image</button>
                </div>

                <!-- Refine Section -->
                <div class="refine-section">
                    <h3>âœ¨ Refine Scene</h3>
                    <div class="refine-controls">
                        <input type="text" id="refine-instruction" class="refine-input" 
                               placeholder="e.g., make it darker and moodier">
                        <button id="refine-btn" class="refine-btn">Refine</button>
                    </div>
                    
                    <div class="quick-refine-buttons">
                        <button class="quick-refine" data-instruction="make it darker and moodier">ğŸŒ™ Darker</button>
                        <button class="quick-refine" data-instruction="add more dramatic lighting">âš¡ More Drama</button>
                        <button class="quick-refine" data-instruction="warmer color temperature">ğŸ”¥ Warmer</button>
                        <button class="quick-refine" data-instruction="softer shadows">â˜ï¸ Softer</button>
                        <button class="quick-refine" data-instruction="increase contrast">ğŸ“ˆ More Contrast</button>
                    </div>
                    
                    <div id="refine-status" class="refine-status"></div>
                </div>
            </div>
        </div>

        <div class="quick-presets">
            <h3>ğŸ¨ Lighting Presets</h3>
            <div class="preset-buttons">
                <button class="preset" data-preset="noir">ğŸ¬ Noir</button>
                <button class="preset" data-preset="golden_hour">ğŸŒ… Golden Hour</button>
                <button class="preset" data-preset="studio">ğŸ¥ Studio</button>
                <button class="preset" data-preset="moonlight">ğŸŒ™ Moonlight</button>
                <button class="preset" data-preset="horror">ğŸ‘» Horror</button>
            </div>
        </div>

        <footer>
            <p>Built for FIBO Hackathon | <a href="#" id="show-api">API Docs</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>